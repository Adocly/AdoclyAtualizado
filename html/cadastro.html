<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adocly Animais</title>
    <link rel="stylesheet" href="../css/cadastro.css">
</head>

<body>

    <div class="cadastro">
        <section>
            <h2>Adocly Animais <img src="../Adocly imagens/WhatsApp_Image_2024-05-11_at_16.55.08-removebg-preview.png"
                    alt=""> </h2>
            <form>
                <input type="email" placeholder="Email:" id="email" required>
                <input type="password" placeholder="Senha:" id="senha" required>
                <button id="criar" >Criar conta</button>
            </form>
            <a href="../html/login.html"> <input type="submit" value="Voltar" id="voltar"> </a>
        </section>
    </div>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
        import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js";
      
  const firebaseConfig = {
    apiKey: "AIzaSyADjxwj3klBs7JmVYhXiAAXBr0m3D3qOSU",
    authDomain: "teste-349f7.firebaseapp.com",
    projectId: "teste-349f7",
    storageBucket: "teste-349f7.appspot.com",
    messagingSenderId: "157850767446",
    appId: "1:157850767446:web:650798ee2761aeca73abf7"
    };
      
      
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
      
  const email = document.getElementById('email').value
  const senha = document.getElementById('senha').value
  const cadastro = document.getElementById('criar')

  const safeEmail = email.replace(/[@.]/g, "_");

    cadastro.addEventListener('click', function(e){
      e.preventDefault();
      set(ref(db, 'Cadastro/' + safeEmail), {
  email: email,
  senha: senha
})
.then(() => {
  console.log("Dados enviados com sucesso");
  alert("Cadastro feito com sucesso!");
})
.catch((error) => {
  console.error("Erro ao cadastrar:", error);
  alert("Erro ao cadastrar. Tente novamente.");
});})
    </script>
</html>